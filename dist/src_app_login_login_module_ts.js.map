{"version":3,"file":"src_app_login_login_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;AAAkD;IAOrC,mBAAmB,SAAnB,mBAAmB;IAE9B,gBAAgB,CAAC;IAEjB,QAAQ,KAAI,CAAC;CAEd;;AANY,mBAAmB;IAL/B,wDAAS,CAAC;QACT,QAAQ,EAAE,iBAAiB;QAC3B,6EAA2C;;KAE5C,CAAC;GACW,mBAAmB,CAM/B;AAN+B;;;;;;;;;;;;;;;;;;;;ACPS;AACM;AAC4C;IAO9E,gBAAgB,SAAhB,gBAAgB;CAAG;AAAnB,gBAAgB;IAL5B,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,yDAAY,CAAC;QACvB,OAAO,EAAE,CAAC,qGAAmB,CAAC;QAC9B,YAAY,EAAE,CAAC,qGAAmB,CAAC;KACpC,CAAC;GACW,gBAAgB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;ACTY;AACc;AAEd;AAEzC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,kDAAS;KACrB;CACF,CAAC;IAMW,sBAAsB,SAAtB,sBAAsB;CAAG;AAAzB,sBAAsB;IAJlC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,sBAAsB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;AChBM;AACM;AACmB;AAErB;AAEmB;AAEvB;AAE6C;AACN;IAgBnE,eAAe,SAAf,eAAe;CAAG;AAAlB,eAAe;IAd3B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,yEAAsB;YACtB,+DAAmB;YACnB,8FAAkB;YAClB,wFAAgB;SACjB;QACD,YAAY,EAAE;YACZ,kDAAS;SACV;KACF,CAAC;GACW,eAAe,CAAG;AAAH;;;;;;;;;;;;;;;;AC3BwC;AAE7D,MAAM,aAAa;IAItB,YAAY,WAAwB;QAChC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACnC,CAAC;IAED,UAAU;QACN,OAAO,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YAC1B,gJAAgJ;YAChJ,KAAK,EAAC,CAAC,EAAE,EAAE,CAAC,+DAAmB,EAAE,4DAAgB,CAAC,CAAC;YACnD,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,+DAAmB,CAAC,CAAC;SACxC,CAAC,CAAC;IACP,CAAC;CACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBiD;AACsB;AAC/B;AAGS;AACY;AACoD;AACjE;IAQpC,SAAS,SAAT,SAAS;IAMpB,YACU,MAAc,EAAG,qCAAqC;IACtD,WAAwB,EACxB,cAA8B,EAC9B,WAA8B,EAC9B,eAAgC;QAJhC,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QACxB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,gBAAW,GAAX,WAAW,CAAmB;QAC9B,oBAAe,GAAf,eAAe,CAAiB;QAPhC,aAAQ,GAAG,KAAK,CAAC;IAQvB,CAAC;IAGL,QAAQ;QACN,mFAAmF;QACnF,IAAI,CAAC,IAAI,GAAG,IAAI,2DAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,UAAU,EAAE,CAAC;QAC5D,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE;YAC7C,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;YACrD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC;QAClC,CAAC,CAAC;IAGJ,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;IACpC,CAAC;IAGK,QAAQ;;YACZ,IAAG;gBACD,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,kFAA+B,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE;oBACzE,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;oBAC1D,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;oBACrB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;gBACnB,CAAC,CAAC,CAAC;gBACH,IAAG,IAAI,CAAC,IAAI,IAAI,IAAI,EAAC;oBACnB,IAAI;wBAAC,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,EAAE;4BACpE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;4BACnB,IAAG,KAAK,CAAC,MAAM,EAAE;gCACf,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,EAAE,EAAC,KAAK,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,MAAM,EAAC,EAAC,CAAC;gCAC3F,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;6BAC9D;iCACG;gCACF,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gCACvB,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;gCACvB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,oBAAoB,EAAE,EAAC,KAAK,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,EAAC,EAAC,CAAC;6BAC7I;wBAAA,CAAC,CAAC,CAAC;qBAAC;oBAAC,OAAM,KAAK,EAAE;wBAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;qBAAC;iBACxC;qBACI;oBACH,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC;iBACvB;aACF;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;aACrB;QACH,CAAC;KAAA;IAEK,UAAU;;YACd,IAAG;gBACD,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,oFAAiC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE;oBAC3E,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;oBAC1D,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;oBACrB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;gBACnB,CAAC,CAAC,CAAC;gBACH,IAAG,IAAI,CAAC,IAAI,IAAI,IAAI,EAAC;oBACnB,IAAI;wBAAC,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,EAAE;4BAChF,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;4BACnB,IAAG,KAAK,CAAC,MAAM,EAAE;gCACf,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;gCAC7D,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,EAAE,EAAC,KAAK,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,MAAM,EAAC,EAAC,CAAC,CAAC;6BAC7F;iCACG;gCACF,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gCACvB,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;gCACvB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,oBAAoB,EAAE,EAAC,KAAK,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,EAAC,EAAC,CAAC;6BAC3I;wBACH,CAAC,CAAC,CAAC;qBAAC;oBAAC,OAAM,KAAK,EAAE;wBAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;qBAAC;iBACvC;qBACI;oBACH,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC;iBACvB;aACF;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;aACrB;QACH,CAAC;KAAA;IAED,MAAM;QACJ,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;IAC7B,CAAC;IAED,KAAK;QACH,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7B,IAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACnB,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;SACrC;aACI;YACH,IAAG;gBACD,IAAI,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,CAAM,KAAK,EAAC,EAAE,CAAC;oBACrF,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;oBAClB,IAAG,KAAK,CAAC,YAAY,EAAE;wBACrB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;wBAC/B,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;qBAC9D;yBACI;wBACH,MAAM,IAAI,CAAC,YAAY,CAAC,wBAAwB,EAAE,wCAAwC,CAAC,CAAC;wBAC5F,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;wBAC/B,IAAI,CAAC,IAAI,GAAG,IAAI,2DAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,UAAU,EAAE,CAAC;qBAChE;gBAAA,CAAC,EAAC,CAAC;aACP;YAAC,OAAM,KAAK,EAAE;gBACb,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;aACpB;SACF;IAAA,CAAC;IAEI,YAAY,CAAC,CAAC,EAAE,CAAC;;YACrB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,MAAM,EAAE,CAAC;gBACT,SAAS,EAAE,CAAC;gBACZ,OAAO,EAAE,CAAC,SAAS,CAAC;aACrB,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC;KAAA;CAEF;;YA5IQ,mDAAM;YADU,uDAAW;YAK3B,oEAAc;YAC0C,oEAAiB;YACzE,2DAAe;;AAQX,SAAS;IALrB,wDAAS,CAAC;QACT,QAAQ,EAAE,WAAW;QACrB,kEAAgC;;KAEjC,CAAC;GACW,SAAS,CA8HrB;AA9HqB","sources":["./src/app/components/error-popup/error-popup.component.ts","./src/app/components/error-popup/error-popup.module.ts","./src/app/login/login-routing.module.ts","./src/app/login/login.module.ts","./src/app/login/login.page.form.ts","./src/app/login/login.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-error-popup',\n  templateUrl: './error-popup.component.html',\n  styleUrls: ['./error-popup.component.scss'],\n})\nexport class ErrorPopupComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {}\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ErrorPopupComponent } from 'src/app/components/error-popup/error-popup.component';\n\n@NgModule({\n  imports: [CommonModule],\n  exports: [ErrorPopupComponent],\n  declarations: [ErrorPopupComponent]\n})\nexport class ErrorPopupModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\nimport { ErrorMessageComponent } from 'src/app/components/error-message/error-message.component';\nimport { ErrorMessageModule } from '../components/error-message/error-message.module';\nimport { ErrorPopupModule } from '../components/error-popup/error-popup.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule,\n    ReactiveFormsModule,\n    ErrorMessageModule,\n    ErrorPopupModule\n  ],\n  declarations: [\n    LoginPage,\n  ]\n})\nexport class LoginPageModule {}\n","import { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\n\nexport class LoginPageForm{\n\n    private formBuilder: FormBuilder;\n\n    constructor(formBuilder: FormBuilder){\n        this.formBuilder = formBuilder;\n    }\n\n    createForm():FormGroup {\n        return this.formBuilder.group({\n            // This function receives objects that will inform the properties of the form that we want to create & also how each property will be validated \n            email:['', [Validators.required, Validators.email]],\n            password: ['', [Validators.required]]\n        });\n    }\n}","import { Component, OnInit } from '@angular/core';\nimport { EmailValidator, FormBuilder, FormGroup } from '@angular/forms';\nimport { Router } from '@angular/router';\n\nimport { RegisterPage } from '../register/register.page';\nimport { LoginPageForm } from './login.page.form';\nimport { AuthApiService } from './../service/api.authService';\nimport { SocialUser, GoogleLoginProvider, FacebookLoginProvider, SocialAuthService } from 'angularx-social-login';\nimport { AlertController } from '@ionic/angular';\n\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  // Declare class variables\n  private form: FormGroup;\n  private user: SocialUser\n  protected loggedIn = false;\n\n  constructor(\n    private router: Router,  // this component is using the router\n    private formBuilder: FormBuilder, \n    private authApiService: AuthApiService,\n    private authService: SocialAuthService,\n    private alertController: AlertController,\n  ) { }\n\n\n  ngOnInit() {\n    // Create form as soon as page is initialized --> have to create inside ngOnInIt() \n    this.form = new LoginPageForm(this.formBuilder).createForm();\n     this.authService.authState.subscribe((user) => {\n      localStorage.setItem('profile', JSON.stringify(user));\n       this.user = user;\n       this.loggedIn = (user != null);\n    })\n    \n\n  }\n\n  register(){\n    this.router.navigate(['register'])\n  }\n\n\n  async toGoogle(){\n    try{\n      await this.authService.signIn(GoogleLoginProvider.PROVIDER_ID).then((data) => {\n          localStorage.setItem('google_auth', JSON.stringify(data));\n          console.log(\"inside\")\n          console.log(data)\n        });\n        if(this.user != null){\n          try {this.authApiService.verifyAccount(this.user).subscribe((dataR) => {\n            console.log(dataR);\n            if(dataR.result) {\n              this.router.navigateByUrl('/tabs', {state: {email: this.user.email, userID: dataR.userID}})\n              localStorage.setItem('userID', JSON.stringify(dataR.userID));\n            }\n            else{\n              console.log(this.user);\n              console.log('external')\n              this.router.navigateByUrl('/external-register', {state: {email: this.user.email, provider: this.user.provider, providerID: this.user.id}})\n          }});} catch(error) {console.log(error)}\n        }\n        else {\n          console.log('Invalid')\n        }\n      } catch (error) {\n        console.log(error)      \n    }\n  } \n\n  async toFacebook(){\n    try{\n      await this.authService.signIn(FacebookLoginProvider.PROVIDER_ID).then((data) => {\n          localStorage.setItem('google_auth', JSON.stringify(data));\n          console.log(\"inside\")\n          console.log(data)\n        });\n        if(this.user != null){\n          try {await this.authApiService.verifyAccount(this.user.email).subscribe((dataR) => {\n            console.log(dataR);\n            if(dataR.result) {\n              localStorage.setItem('userID', JSON.stringify(dataR.userID));\n              this.router.navigateByUrl('/tabs', {state: {email: this.user.email, userID: dataR.userID}});\n            }\n            else{\n              console.log(this.user);\n              console.log('external')\n              this.router.navigateByUrl('/external-register', {state: {email: this.user.email, provider: this.user.provider, providerID: this.user.id}})\n            }\n          });} catch(error) {console.log(error)}\n        }\n        else {\n          console.log('Invalid')\n        }\n      } catch (error) {\n        console.log(error)      \n    }\n  }\n\n  logOut() {\n    localStorage.setItem('userID', JSON.stringify(''));\n    this.authService.signOut();\n  }\n\n  login(){\n    console.log(this.form.value);\n    if(!this.form.valid) {\n      console.log(\"Invalid registration\");\n    } \n    else {\n      try{\n        let outcome = this.authApiService.localLogin(this.form.value).subscribe(async dataR => {\n          console.log(dataR)\n          if(dataR.loginSuccess) {\n            this.router.navigate(['tabs']);\n            localStorage.setItem('userID', JSON.stringify(dataR.userID));\n          }\n          else {\n            await this.presentAlert(\"Invalid Email/Password\", \"Kindly key in valid email and password\");\n            console.log(\"No such account\");\n            this.form = new LoginPageForm(this.formBuilder).createForm();\n        }});\n    } catch(error) {\n      console.log(error);\n    }\n  }}\n\n  async presentAlert(h, b){\n    const alert = await this.alertController.create({\n      header: h,\n      subHeader: b,\n      buttons: ['Dismiss']\n    });\n    await alert.present();\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}